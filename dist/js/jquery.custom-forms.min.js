!function(t){var e={customSelect:!0,customCheckbox:!0,useMask:!0,keyMapping:!0,validation:!0,errorContainer:"span.error",stepForm:{active:!1,dynamicValidation:!0,slideToTop:!0,stepSelector:".step",nextSelector:".next-step",prevSelector:".prev-step",dynamicHeight:!1,onNextStep:function(t,e,a,o){},onPrevStep:function(t,e,a,o){},onStepValidation:function(t,e,a,o){}},fileUpload:{active:!1,containerSelector:".upload_container",listSelector:".list_of_files",browseSelector:".add_next_file",apiUrl:"",onFileAdded:function(t,e){},onFileDeleted:function(t,e){}},onSubmit:function(t,e){},onInputValidation:function(t,e,a){},onFormValidation:function(t,e){},onInit:function(t){}};t.fn.customForm=function(a){var o,i,n=null,r=0,s=null,l=0,d=0,c=null,f=null,p=!1,u=null,m=null,v=null,h=function(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<7;a++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},F=function(e){e.wrap('<div class="cf-form__select" style="position: relative;"></div>');var a=e.attr("name"),o=e.find("option"),n=e.parent(),r=t("<input/>").attr("type","hidden").attr("name",a).attr("value",""),s=e.attr("placeholder");void 0===s&&(s="Wybierz");var l=t('<a class="cf-form__select-placeholder"></a>').attr("href","").append(t("<span></span>").html(s)).on("click",function(t){t.preventDefault()}),d=t('<ul class="cf-form__select-options" style="position: absolute; bottom: 0; top: 100%;"></ul>');if(t.each(o,function(){var e=t(this).attr("value"),a=t(this).html(),o=t('<li class="cf-form__select-option"></li>').attr("data-value",e).html(a).on("click",S);d.append(o)}),n.append(l).append(d).append(r),n.on("click",U),n.on("mouseleave",w),i.validation){var c=e.attr("data-validation"),f=e.attr("data-validation-error");"undefined"!=c&&(n.attr("data-validation",c),n.addClass("custom-form-validated"),"undefined"!=f&&n.attr("data-validation-error",f),r.on("change",function(e){if(E(e,t(this)),i.stepForm.active&&i.stepForm.dynamicValidation){var a=t(this).closest(i.stepForm.stepSelector);z(a)}}))}e.remove()},g=function(e){var a=e.attr("data-checkbox-type"),n=e.attr("data-checkbox-group"),r=e.attr("type");if(void 0===a&&(a="normal"),void 0===n&&(n=null),"box"==a){var s,l,d=o.find('label[for="'+e.attr("id")+'"]');if(n){var c=o.find('[data-group="'+n+'"]');0==c.length?(e.wrap('<div class="cf-form__checkbox-group type-'+r+'" data-group="'+n+'"></div>'),s=e.parent()):s=c,l=n}else e.wrap('<div class="cf-form__checkbox-group type-'+r+'"></div>'),s=e.parent(),l=e.attr("name");var f=t("<a></a>").addClass("cf-form__checkbox").attr("href","").attr("data-value",e.val()).html(d.html()).on("click",y),p=t("<input/>").attr("type","hidden").attr("name",l).attr("value","");if(s.append(f),0==s.find('input[type="hidden"]').length&&s.append(p),i.validation){var u=e.attr("data-validation"),m=e.attr("data-validation-error");void 0!==u&&(s.attr("data-validation",u),s.addClass("custom-form-validated"),void 0!==m&&s.attr("data-validation-error",m),p.on("change",function(e){if(E(e,t(this)),i.stepForm.active&&i.stepForm.dynamicValidation){var a=t(this).closest(i.stepForm.stepSelector);z(a)}}))}e.remove(),d.remove()}else i.validation&&void 0!==(u=e.attr("data-validation"))&&(e.addClass("custom-form-validated"),e.on("change",function(){var e=t(this).attr("name"),a=!0;if(void 0!==e){var n=!1,r=o.find('[name="'+e+'"]');t.each(r,function(){t(this).is(":checked")&&(n=!0)}),a=n}else a=t(this).is(":checked");if(a?(t(this).addClass("validation-ok"),t(this).removeClass("validation-error")):(t(this).removeClass("validation-ok"),t(this).addClass("validation-error")),i.stepForm.active&&i.stepForm.dynamicValidation){var s=t(this).closest(i.stepForm.stepSelector);z(s)}}))},x=function(e){e.preventDefault();var a=t(this).parent().parent().find("input"),o=a.val(),n=a.data("max"),r=a.data("min");if(o=parseInt(o),isNaN(o)?o=r:++o>n&&(o=r),a.val(o),E(e,a),i.stepForm.active&&i.stepForm.dynamicValidation){var s=a.closest(i.stepForm.stepSelector);z(s)}},_=function(e){e.preventDefault();var a=t(this).parent().parent().find("input"),o=a.val(),n=a.data("max"),r=a.data("min");if(o=parseInt(o),isNaN(o)?o=r:o>n?o=r:--o<r&&(o=r),a.val(o),E(e,a),i.stepForm.active&&i.stepForm.dynamicValidation){var s=a.closest(i.stepForm.stepSelector);z(s)}},C=function(e){var a=e.attr("data-validation");if(void 0!==a){e.wrap('<div class="cf-form__input-group custom-form-validated"></div>'),e.addClass("cf-form__input");var o=e.parent(),n=[];(n=a.split(/\s/)).length>0&&(o.append(t("<span></span>").addClass("cf-form__addon cf-form__addon--validate")),-1!=t.inArray("phone",n)&&(o.prepend(t("<span></span>").addClass("cf-form__addon cf-form__addon--prefix").html("+48")),i.useMask&&e.mask("999-999-999")),-1!=t.inArray("post",n)&&i.useMask&&e.mask("99-999"),-1!=t.inArray("numeric",n)&&o.prepend(t("<span></span>").addClass("cf-form__addon cf-form__addon--prefix").append(t("<a></a>").addClass("cf-form__numeric-button cf-form__numeric-button--up").on("click",x)).append(t("<a></a>").addClass("cf-form__numeric-button cf-form__numeric-button--down").on("click",_))),e.on("change, focusout",function(e){if(console.log("test1"),E(e,t(this)),i.stepForm.active&&i.stepForm.dynamicValidation){var a=t(this).closest(i.stepForm.stepSelector);z(a)}}),e.on("keyup",function(e){if(E(e,t(this)),i.stepForm.active&&i.stepForm.dynamicValidation){var a=t(this).closest(i.stepForm.stepSelector);z(a)}}))}},b=function(e){var a=e.attr("data-validation");if(void 0!==a){e.wrap('<div class="input-group custom-form-validated"></div>'),e.addClass("cf-form__input");var o=e.parent();a.split(/\s/).length>0&&(o.append(t("<span></span>").addClass("cf-form__addon--prefix")),e.on("change, focusout",function(e){if(I(e,t(this)),i.stepForm.active&&i.stepForm.dynamicValidation){var a=t(this).closest(i.stepForm.stepSelector);z(a)}}),e.on("keyup",function(e){if(I(e,t(this)),i.stepForm.active&&i.stepForm.dynamicValidation){var a=t(this).closest(i.stepForm.stepSelector);z(a)}}))}},k=function(){s=o.find(i.stepForm.stepSelector),r=s.length,d=100/parseFloat(r),o.addClass("step-form-wrap").css({overflow:"hidden",width:"100%"});var e=t("<div></div>").addClass("step-form").css({width:100*r+"%",display:"block",transform:"translate(0, 0)",transition:"600ms"});s.wrapAll(e),c=o.find(".step-form"),t.each(s,function(){t(this).css({width:d+"%",display:"block",float:"left"})}),o.find(i.stepForm.nextSelector).on("click",A),o.find(i.stepForm.prevSelector).on("click",V)},D=function(){var e=o.find(i.fileUpload.containerSelector),a=e.find(i.fileUpload.listSelector),n=e.find(i.fileUpload.browseSelector);u="fucont-"+h(),m="fuadd-"+h(),v="fulist-"+h(),e.attr("id",u).addClass("cf-form__upload-container"),a.attr("id",v).addClass("cf-form__files"),n.attr("id",m).addClass("cf-form__upload-button"),(f=new plupload.Uploader({runtimes:"html5,flash,silverlight,html4",browse_button:m,container:document.getElementById(u),url:i.fileUpload.apiUrl,flash_swf_url:"/assets/js/Moxie.swf",silverlight_xap_url:"/assets/js/Moxie.xap",filters:{max_file_size:"10mb",mime_types:[{title:"Image files",extensions:"jpg,gif,png"},{title:"Zip files",extensions:"zip"},{title:"Documents",extensions:"pdf"}]},preinit:{Init:function(t,e){console.log("[Init]",e)},UploadFile:function(t,e){console.log("[UploadFile]",e)}},init:{PostInit:function(){console.log("[PostInit]"),document.getElementById(v).innerHTML=""},Browse:function(t){console.log("[Browse]")},Refresh:function(t){console.log("[Refresh]")},StateChanged:function(t){console.log("[StateChanged]",t.state==plupload.STARTED?"STARTED":"STOPPED")},QueueChanged:function(t){console.log("[QueueChanged]")},OptionChanged:function(t,e,a,o){console.log("[OptionChanged]","Option Name: ",e,"Value: ",a,"Old Value: ",o)},BeforeUpload:function(t,e){console.log("[BeforeUpload]","File: ",e)},UploadProgress:function(t,e){console.log("[UploadProgress]","File:",e,"Total:",t.total)},FileFiltered:function(t,e){console.log("[FileFiltered]","File:",e)},FilesAdded:function(t,e){console.log("[FilesAdded]"),plupload.each(e,function(t){document.getElementById(v).innerHTML+='<li id="'+t.id+'" class="cf-form__file"><input type="hidden" value="'+t.name+'" name="files[]" /><span>'+t.name+'</span><button data-id="'+t.id+'" class="cf-form__file-remove remove"></button></li>'}),i.fileUpload.onFileAdded(o,e)},FilesRemoved:function(t,e){console.log("[FilesRemoved]")},FileUploaded:function(t,e,a){console.log("[FileUploaded] File:",e,"Info:",a)},ChunkUploaded:function(t,e,a){console.log("[ChunkUploaded] File:",e,"Info:",a)},UploadComplete:function(t,e){console.log("[UploadComplete]"),p=!0,o.submit()},Destroy:function(t){console.log("[Destroy]")},Error:function(t,e){console.log(e,t)}}})).init(),a.on("click","button.remove",function(e){e.preventDefault();var a=t(this).attr("data-id");f.removeFile(f.getFile(a)),t("#"+a).remove(),i.fileUpload.onFileDeleted(o,f.getFile(a))})},y=function(e){e.preventDefault();var a=t(this).parent(),o=t(this),i=a.find('input[type="hidden"]'),n=a.hasClass("type-checkbox")?"checkbox":"radio",r=o.attr("data-value");if(o.hasClass("checked")){if("checkbox"==n){if(o.removeClass("checked"),""!=(l=i.attr("value"))){var s=(l=l.split(",")).indexOf(r);s>-1&&l.splice(s,1),l=l.join(",")}i.attr("value",l),i.trigger("change")}}else{if("radio"==n&&a.find(".cf-form__checkbox").removeClass("checked"),o.addClass("checked"),"radio"==n)i.attr("value",r);else{var l=i.attr("value");""!=l?((l=l.split(",")).push(r),l=l.join(",")):l=r,i.attr("value",l)}i.trigger("change")}},S=function(e){e.preventDefault();var a=t(this).attr("data-value"),o=t(this).html(),i=t(this).parent().parent();""!=a?i.addClass("selected"):i.removeClass("selected"),i.find("a").find("span").html(o),i.find('input[type="hidden"]').val(a).trigger("change")},U=function(e){e.preventDefault();var a=t(this).find("ul");if(t(this).hasClass("cs-form__select-opened"))a.css({bottom:"0px"}),t(this).removeClass("cs-form__select-opened");else{var o=0;a.find("li").each(function(){o+=t(this).outerHeight(!0)}),a.css({bottom:"-"+o+"px"}),t(this).addClass("cs-form__select-opened")}},w=function(e){e.preventDefault(),t(this).find("ul").css({bottom:"0px"}),t(this).removeClass("cs-form__select-opened")},A=function(e){e.preventDefault();var a=!0,n=t(this).closest(i.stepForm.stepSelector);if(i.validation&&(a=z(n)),a){l++;var r=parseFloat(l)*d;if(i.stepForm.dynamicHeight){var p=o.find('[form-step="'+l+'"]'),u=p.attr("form-height");p.css({height:u}),t.each(s,function(){t(this).attr("form-step")!=l&&t(this).css({height:u})})}c.css({transform:"translate(-"+r+"%, 0)"}),i.stepForm.slideToTop&&t("body").scrollTo(o.offset().top-180,500),i.fileUpload.active&&f.refresh(),i.stepForm.onNextStep(o,n,l-1,l)}},V=function(e){e.preventDefault();var a=t(this).closest(i.stepForm.stepSelector);if(l--,i.stepForm.dynamicHeight){var n=o.find('[form-step="'+l+'"]'),r=n.attr("form-height");n.css({height:r}),t.each(s,function(){t(this).attr("form-step")!=l&&t(this).css({height:r})})}c.css({transform:"translate(-"+parseFloat(l)*d+"%, 0)"}),i.stepForm.slideToTop&&t("body").scrollTo(o.offset().top-180,500),i.stepForm.onPrevStep(o,a,l+1,l)},E=function(e,a){console.log("validateinput");var n=a.closest(".custom-form-validated");0==n.length&&(n=a);var r=a.attr("type");if(-1!=t.inArray(r,["text","hidden","email"])){var s,l=a.val(),d=(s="text"==r||"email"==r?a.attr("data-validation"):n.attr("data-validation")).split(/\s/);if(d.length>0){var c=!0;t.each(d,function(t,e){var o=!0;switch(e){case"required":o=M(l);break;case"phone":o=H(l);break;case"email":o=P(l);break;case"alphanumeric":o=B(l);break;case"post":o=j(l);break;case"numeric":var i=a.data("max"),n=a.data("min");o=O(l,i,n);break;default:o=!0}o||(c=!1)}),c?(n.addClass("validation-ok"),n.removeClass("validation-error")):(n.removeClass("validation-ok"),n.addClass("validation-error")),i.onInputValidation(o,a,c)}}},I=function(e,a){var n=a.closest(".custom-form-validated");0==n.length&&(n=a);var r,s=a.val(),l=(r=a.attr("data-validation")).split(/\s/);if(l.length>0){var d=!0;t.each(l,function(t,e){var a=!0;switch(e){case"required":a=M(s);break;default:a=!0}a||(d=!1)}),d?(n.addClass("validation-ok"),n.removeClass("validation-error")):(n.removeClass("validation-ok"),n.addClass("validation-error")),i.onInputValidation(o,a,d)}},T=function(e){var a=!0;return t.each(e,function(){var e,i=t(this).prop("tagName").toLowerCase();"input"!=i&&"textarea"!=i?0==(e=t(this).find("input")).length&&(e=t(this).find("textarea")):e=t(this);var n,r,s=e.val();"textarea"!=e.prop("tagName").toLowerCase()?n="text"==(r=e.attr("type"))||"email"==r?e.attr("data-validation"):t(this).attr("data-validation"):(r="text",n=e.attr("data-validation"));var l=n.split(/\s/);if(l.length>0){var d=!0;if("checkbox"!=r)t.each(l,function(t,e){var a=!0;switch(e){case"required":a=M(s);break;case"phone":a=H(s);break;case"email":a=P(s);break;case"alphanumeric":a=B(s);break;case"post":a=j(s);break;case"numeric":a=O(s);break;default:a=!0}a||(d=!1)});else{var c=t(this).attr("name");if(void 0!==c){var f=!1,p=o.find('[name="'+c+'"]');t.each(p,function(){t(this).is(":checked")&&(f=!0)}),d=f}else d=t(this).is(":checked")}d?(t(this).addClass("validation-ok"),t(this).removeClass("validation-error")):(a=!1,t(this).removeClass("validation-ok"),t(this).addClass("validation-error"))}}),a},z=function(t){var e=t.find(".custom-form-validated"),a=T(e);return i.stepForm.onStepValidation(o,t,l,a),a},N=function(){var t=o.find(".custom-form-validated"),e=T(t);return i.onFormValidation(o,e),e},M=function(t){return t.match(/^.+$/)},H=function(t){return""==t||(t=t.replace(/(\-|\s)/gi,""),matches=t.match(/^[0-9]{9}$/),matches)},P=function(t){return""==t||t.match(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/)},B=function(t){return""==t||t.match(/^([A-ZĘÓĄŚŁŻŹĆŃa-zęóąśłżźćń0-9\s\-\/\.]+)$/)},j=function(t){return""==t||(t=t.replace(/(\-|\s)/gi,""),matches=t.match(/^[0-9]{5}$/),matches)},O=function(t,e,a){return""==t||!(t<a||t>e)&&!isNaN(parseInt(t))};this.length>0&&(this.length>1?this.each(function(){t(this).customForm(a)}):(!function(a){if("boolean"==typeof(i=t.extend({},e,a)).stepForm){var o=i.stepForm;i.stepForm={active:o,dynamicValidation:!0,slideToTop:!0,stepSelector:".step",nextSelector:".next-step",prevSelector:".prev-step",dynamicHeight:!1,onNextStep:function(t,e,a,o){},onPrevStep:function(t,e,a,o){},onStepValidation:function(t,e,a,o){}}}else i.stepForm=t.extend({},e.stepForm,i.stepForm);if("boolean"==typeof i.fileUpload){var n=i.fileUpload;i.fileUpload={active:n,containerSelector:".upload_container",listSelector:".list_of_files",browseSelector:".add_next_file",apiUrl:"",onFileAdded:function(t,e){},onFileDeleted:function(t,e){}}}else i.fileUpload=t.extend({},e.fileUpload,i.fileUpload)}(a),(o=this).addClass("cf-form"),n=o.find("input, select, textarea"),o.find('[type="submit"]').addClass("cf-form__submit"),t.each(n,function(){var e=t(this),a=e.prop("tagName").toLowerCase(),o="input"==a?e.attr("type"):"not-needed";i.validation&&(e.removeAttr("required"),e.attr("autocomplete","off")),"select"==a&&i.customSelect&&F(e),"input"!=a||"checkbox"!=o&&"radio"!=o||!i.customCheckbox||g(e),i.validation&&"input"==a&&-1!=t.inArray(o,["text","email","number"])&&("number"!==o&&"email"!==o||e.attr("type","text"),C(e)),i.validation&&"textarea"==a&&b(e)}),i.stepForm.active&&k(),i.fileUpload.active&&D(),o.on("submit",function(t){var e=!0;i.validation&&(e=N()),e?i.fileUpload.active&&0==p?(t.preventDefault(),f.start()):i.onSubmit(t,o):(t.preventDefault(),console.log("zle!"))}),i.onInit(),t(window).on("load",function(){var e=o.find(i.stepForm.stepSelector);if(t.each(e,function(){var e=t(this).outerHeight();t(this).attr("form-height",e)}),i.stepForm.dynamicHeight){var a=o.find('[form-step="0"]').attr("form-height");t.each(e,function(){0!=t(this).attr("form-step")&&t(this).css({height:a})})}})))}}(jQuery);